TODO
====
Crash if model is saved, then filters reloaded, then model is saved again (since filter pointer will be wrong)?
Automatically adjust grid size for number of visible models, based on current aspect ratio and context size etc.
Sort out remaining icons!
Undo/Redo:
  * Rework UndoEvent to use an enum and stored data rather than an individual class for each event type.
  * Add Grid-related undo/redo (e.g. title changes, colour etc.)
Need to shrink used button space when window is not large enough to display all widgets in panel.
silica.txt needs new option dialog.
Custom dialog code example (uitest.txt) does not successfully retrieve widget values (true for all dialogs on save?).
Rename commands for consistency - e.g. newFF to newForcefield?
Ato export format is incorrect if nrestraints == 0 (i.e. for single atoms) since newline is not printed.
DL_POLY trajectory cannot be properly loaded without a model containing the correct atoms - add the ability to create a local, temporary model in the filter, and store atom information in this in the readHeader() function. Then could update modelTemplate to take a model pointer as an optional argument. Does this mean we should rewrite the language to properly use pointer specifications?
Trajectory handling:
o Change of colour happens only in the current frame
o Inherit generates a crash when at first frame
Session Saving - loaded models, view orientations, loaded grids and cutoff values etc.
Image saving:
o Continuous image saving - function key to save image under a set-filename, incrementing a number suffix each time.
Intelligent Select - add support for selection by type name (e.g. O*, OW etc.).
Matrix class, with set members allowing axes to be set from atoms in models?

Graphics TODO
=============
In top-left corner of main window, have a black icon illustrating which mode is active (except for Interact).
Have small, additional black icons at top-right of each model window, illustrating whether it has been modified, is displaying trajectory frames, etc.
Optimise basic primitives to use vertex/index arrays instead of just vertices (also check end caps of spheres).
Optimise primitive drawing / generation by allowing use of GL_TRIANGLE_STRIP?
Reimplement drawing of grid (volume) axes.
Fix grid transparency (reconstruct grids according to view angle?).
Make main view background and text/overlay colour aware of Qt widget colouring style.
Frame individual model areas when displaying multiple models.

GUI TODO
========
AddAtom functionality (from old Build menu).
Context Menu:
o Set Colour doesn't work, since it needs a colour selector popup.
Build option - keep centred.
Remove TColourFrame (after updating Prefs and Glyphs windows).
Button to calculate / show total charge in selection.
Allow right-click on elements in PTable to set as member of common elements popup.
Finish Spacegroup popup.
Add Calculate tool to work out centre of geometry/mass.
Add option to display ColourScale selector (e.g. for Grid colour buttons)
Have Tools page? With, for instance:
--- Plot Orbital (raising dialog from old GridsWidget)
Where to show current (empirical) selection
Add manual typing popup.
Prefs window needs updating:
o Remove use of TColourFrames
o Add font selection option
o Changing colour of an atom in Element page - click save and crash.

Possible TODO
=============
Implement optional startup 'guide' or 'wizard' that will disable all controls on the GUI and explain what means what, highlighting them as appropriate.
Add in calculation of quantities and graphing?
Instead of a separate AtenVariable, make Aten subclass Variable?
Move Prefs from being a static global to a member of Aten?
Make UserActions a member of something (Viewer?).
Reformulate Pattern::bondEnergy() and others into a separate class, since the Pattern class shouldn't really own them.
Make Model::EnergyStore a private member with accessor?
Add ObjectLists (when using CHECK)?
Click to select grid.
Remove global MC, CG, SD declarations, and put them in Aten?

Manual TODO
===========
Remove level of detail and transparency options from Prefs.
More examples (e.g. slab generation)
Remove 'gui' keyword.
Remove 'calcEnergy' optional args from scaleMolecules and scaleCell.
Remove replaceChars (after command is removed).
Remove frameCurrent* from Prefs accessors.
Added SetAngles, SetDistances, and SetTorsions commands.
Add GridStyleSecondary command (GridStyle now explicitly for primary surface).
Change enum entries for Grid::SurfaceStyle.
Add GridOutline and GridPeriodic commands.
Rename (De)SelectFor to (De)SelectCode.
Remove ManualSwapBuffers from Prefs accessor.
growAtom / selectionGrowAtom - add optional parameter "bool bond = true".
Remove LineTol and Converge commands, and update minimisation command signatures (inc return values).
Remove prefs options for replicate, and add extra options to turn on folding and trimming to replicate() command.
Add viewerFontFileName member Prefs accessor.
Remove TransparentSelection Prefs accessor.
Add TrajectoryFormat CLI switch (tf).
Add GridViewPercentage and GridViewSecondaryPercentage commands.
TestSelect command.