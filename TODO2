TODO
====
Crash if model is saved, then filters reloaded, then model is saved again (since filter pointer will be wrong)?
Remove dialog pointers (use instances instead).
Fix callbacks for atom picking etc.
Octahedral Growing doesn't work.
Check - is using redirected filenames really necessary when saving movie frame images?
Automatically adjust grid size for number of visible models, based on current aspect ratio and context size etc.
Redo ProgressIndicator, making into a class much like QProgress (can't just use QProgress, since we want to have progress indicator functionality in the CLI....). Make it clever enough to realise that the gui is visible or not. Perhaps integrate it into Messenger, so that messages printed out while the indicator is running don't disrupt the indicator?
Sort out remaining icons!
View by percentage and multiple of rho for grid cutoff (put in popup).
Undo/Redo:
  * Rework UndoEvent to use an enum and stored data rather than an individual class for each event type.
  * Add Grid-related undo/redo (e.g. title changes, colour etc.)
Rendering of current fragment is broken (use a local RenderGroup? For bond drawing in DrawAtoms as well...).
Make Delete tool have a click-drag action that deletes the bond between the clicked atoms.

Graphics TODO
=============
In top-left corner of main window, have a black icon illustrating which mode is active (except for Interact).
Have small, additional black icons at top-right of each model window, illustrating whether it has been modified, is displaying trajetory frames, etc.
Optimise basic primitives to use vertex/index arrays instead of just vertices (also check end caps of spheres).
Optimise primitive drawing / generation by allowing use of GL_TRIANGLE_STRIP?
Reimplement drawing of grid (volume) axes.
Fix grid transparency (reconstruct grids according to view angle?).
Make main view background and text/overlay colour aware of Qt widget colouring style.

GUI TODO
========
AddAtom functionality (from old Build menu).
Context Menu:
o Set Colour doesn't work, since it needs a colour selector popup.
Build option - keep centred.
Remove TColourFrame (after updating Prefs and Glyphs windows).
Button to calculate / show total charge in selection.
Allow right-click on elements in PTable to set as member of common elements popup.
Finish Spacegroup popup.
Add Calculate tool to work out centre of geometry/mass.
Add option to display ColourScale selector (e.g. for Grid colour buttons)
Have Tools page? With, for instance:
--- Plot Orbital (raising dialog from old GridsWidget)
Reimplement Open Expression somewhere.

Possible TODO
=============
Implement optional startup 'guide' or 'wizard' that will disable all controls on the GUI and explain what means what, highlighting them as appropriate.
Add in calculation of quantities and graphing?
Instead of a separate AtenVariable, make Aten subclass Variable?
Move Prefs from being a static global to a member of Aten?
Make ElementMap store reference to Aten, preventing passing of FFs?
Make UserActions a member of something (Viewer?).
Reformulate Pattern::bondEnergy() and others into a separate class, since the Pattern class shouldn't really own them.
Make Model::EnergyStore a private member with accessor?
Add ObjectLists (when using CHECK)?
Click to select grid.
Remove global MC, CG, SD declarations, and put them in Aten?
Snapshot option, copying current view or image save details directly to clipboard

Manual TODO
===========
Remove level of detail and transparency options from Prefs.
More examples (e.g. slab generation)
Remove 'gui' keyword.
Remove 'calcEnergy' optional args from scaleMolecules and scaleCell.
Remove replaceChars (after command is removed).
Remove frameCurrent* from Prefs accessors.
Added SetAngles, SetDistances, and SetTorsions commands.
Add GridStyleSecondary command (GridStyle now explicitly for primary surface).
Change enum entries for Grid::SurfaceStyle.
Add GridOutline and GridPeriodic commands.
Rename (De)SelectFor to (De)SelectCode.
Remove ManualSwapBuffers from Prefs accessor.
growAtom / selectionGrowAtom - add optional parameter "bool bond = true".
Remove LineTol and Converge commands, and update minimisation command signatures (inc return values).
Remove prefs options for replicate, and add extra options to turn on folding and trimming to replicate() command.
Add viewerFontFileName member Prefs accessor.
Remove TransparentSelection Prefs accessor.